<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Town of Shadows</title>
<style>
  body { background:#080808; color:#eee; font-family: Arial, sans-serif; margin:0; }
  .topbar { position:fixed; top:0; left:0; right:0; background:#111; color:#fff; padding:10px; z-index:50; }
  .phaseBar { height:8px; background:#333; border-radius:4px; overflow:hidden; margin-top:6px; }
  .phaseFill { height:100%; width:0%; transition: width 1s linear; background:linear-gradient(90deg,#f1c40f,#f39c12); }
  .container { padding:80px 12px 20px; max-width:1000px; margin:auto; }
  #playerGrid { display:grid; grid-template-columns: repeat(5, 1fr); gap:8px; }
  .player { background:#111; padding:10px; border-radius:8px; text-align:center; cursor:pointer; color:#ddd; }
  .player.dead { opacity:0.35; text-decoration:line-through; }
  .player .role { display:block; font-size:12px; color:#9ae6b4; margin-top:6px; }
  #votePanel { margin-top:10px; display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
  .voteBtn { background:#222; border:1px solid #444; color:#fff; padding:8px 10px; border-radius:6px; cursor:pointer; }
  #chatBox { background:#0b0b0b; height:180px; overflow:auto; padding:8px; border-radius:8px; border:1px solid #222; margin-top:12px; }
  #controls { display:flex; gap:8px; margin-top:8px; flex-wrap:wrap; }
  input[type=text] { padding:8px; border-radius:6px; border:1px solid #333; background:#0b0b0b; color:#fff; width:200px; }
  button { padding:8px 10px; border-radius:6px; background:#222; color:#fff; border:1px solid #333; cursor:pointer; }
  #statusLine { margin-bottom:6px; color:#ddd; }
  .skip { background:#555 !important; }
  .selected { outline:2px solid #f39c12; }
  @media (max-width:600px) {
    #playerGrid { grid-template-columns: repeat(4, 1fr); }
  }
</style>
</head>
<body>
  <div class="topbar">
    <div id="phaseLabel">Phase: â€”</div>
    <div class="phaseBar"><div id="phaseFill" class="phaseFill"></div></div>
  </div>

  <div class="container">
    <div id="connect">
      <input id="playerName" placeholder="Your name" />
      <input id="roomId" placeholder="Room ID (leave blank to create)" />
      <button onclick="createOrJoin()">Create / Join</button>
      <button onclick="startGame()">Start Game</button>
      <div id="statusLine">Not connected</div>
    </div>

    <div id="gameArea" style="display:none;">
      <div style="display:flex;justify-content:space-between;align-items:center;">
        <div><strong id="lobbyLabel">Lobby</strong></div>
        <!-- Start Game button inside game area for host -->
        <div><button onclick="startGame()">Start Game</button></div>
      </div>

      <div id="playerGrid"></div>

      <div id="votePanel" style="display:none;">
        <div id="voteControls">
          <button class="voteBtn" onclick="castVote('skip')" id="skipBtn">Skip</button>
          <button class="voteBtn" onclick="confirmVote()" id="confirmBtn">Confirm Vote</button>
          <button class="voteBtn" onclick="changeVote()" id="changeBtn">Change Vote</button>
        </div>
        <div id="voteMsg" style="margin-left:10px;color:#ccc;"></div>
      </div>

      <div id="chatBox"></div>
      <div style="margin-top:8px;">
        <input id="chatInput" type="text" placeholder="Type message or number to vote..." />
        <button onclick="sendChat()">Send</button>
      </div>
    </div>
  </div>

<script src="wsClient.js"></script>
</body>
</html>
